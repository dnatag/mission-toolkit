# MISSION

type: WET
track: 2
iteration: 1
status: completed
completed_at: 2025-12-23T13:56:30.000Z

## INTENT
Create an "AST-Guided Slicer" algorithm using yuin/goldmark that treats markdown documents as flat lists of "Cards" (sections), where each Card starts with a ## level header and contains instruction strings in parentheses and/or list items (key-value pairs or simple strings)

## SCOPE
internal/utils/slicer.go
internal/utils/slicer_test.go

## PLAN
- [x] Add yuin/goldmark dependency to go.mod
- [x] Create utils package with AST-Guided Slicer algorithm
- [x] Define Card struct with Header (ID) and Content fields
- [x] Implement goldmark AST walker to extract sections as Cards
- [x] Maintain flat list structure preserving document order
- [x] Extract ## level headings as Card IDs
- [x] Parse section content under each ## header as only two types:
  - Instruction strings wrapped in parentheses: "(Description text)"
  - List items that can be either:
    - Key-value pairs: "- key: value" (split on first colon)
    - Simple strings: "- Item text"
- [x] Filter out other markdown elements and non-## headers
- [x] Add comprehensive unit tests for Card extraction with restricted content types
- [x] Test edge cases (empty sections, mixed valid/invalid content)
- [x] Note: Allow duplication for initial implementation

## VERIFICATION
go test ./internal/utils/ -v && go run -c 'import "internal/utils"; cards := utils.SliceMarkdown("## SECTION1\n(Instruction text)\n- key: value\n- Simple item\n## SECTION2\n(Another instruction)\n- name: John"); fmt.Printf("Cards: %+v", cards)'

## EXECUTION INSTRUCTIONS
⚠️  DO NOT EXECUTE THIS MISSION NOW
- This is PLANNING PHASE only
- Run: `@m.apply` to execute this mission (requires user approval)
- Run: `@m.complete` to archive when finished
