# MISSION

type: WET
track: 2
iteration: 1
status: completed
completed_at: 2025-12-18T14:24:28.792-05:00

## INTENT
Make unit tests automatically detect when new IDD command templates are added but not included in the deployment system, preventing regressions where new commands exist but aren't deployed.

## SCOPE
/Users/dnatag/git/catalyst-toolkit/internal/templates/templates_test.go

## PLAN
- [x] Replace hardcoded promptFiles arrays in tests with dynamic discovery from embedded filesystem
- [x] Scan internal/templates/prompts/ directory to get all available .md files
- [x] Generate expected file paths dynamically for each AI type based on discovered templates
- [x] Ensure tests fail when new templates exist but aren't deployed
- [x] Note: Allow duplication for initial implementation

## VERIFICATION
go test ./internal/templates/ -v

## IMPLEMENTATION SUMMARY
- Replaced hardcoded template arrays with dynamic discovery from embedded filesystem
- Added getAvailablePromptTemplates() function to scan prompts directory
- Added generateExpectedFiles() function to create expected paths per AI type
- Tests now automatically detect new .md files and expect them to be deployed
- Verified regression detection works by testing with temporary template file

## FILES MODIFIED
- /Users/dnatag/git/catalyst-toolkit/internal/templates/templates_test.go
